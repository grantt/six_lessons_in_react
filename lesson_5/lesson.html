<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='Content-type' content='text/html; charset=utf-8'>
    <title>Lesson 5 - Advanced Actions</title>
      <link rel="stylesheet" href="../assets/css/base.css" />
  </head>
  <body>
    <h1>Lesson 5 - Advanced Actions</h1>
    <div id="container">
        <p>Let's now add an additional level of complexity to our application by introducing a sidebar of actions to modify the document. These will include the ability to name the document, copy the document content, and clear the document content.</p>
        <p>First let's introduce the <code>Sidebar</code> component as we would any new react component.</p>
        <pre><code>var Sidebar = React.createClass({
    displayName : 'Sidebar',

    mixins: [
        FluxMixin,
        Fluxxor.StoreWatchMixin('DocumentStore')
    ],

    styles: {
        container: {
            WebkitBoxSizing: 'border-box',
            MozBoxSizing: 'border-box',
            boxSizing: 'border-box',
            float: 'left',
            width: '12%',
            backgroundColor: '#424242',
            color: '#e9e9e9'
        },
        ul: {
            padding: '0px 5px',
            marginTop: '0px',
            marginBottom: '0px'
        },
        li: {
            paddingTop: '2px',
            paddingBottom: '2px',
            cursor: 'pointer'
        },
        i: {
            width: '25px'
        }
    },

    getStateFromFlux: function() {
        var flux = this.getFlux();
        return flux.store('DocumentStore').getState();
    },

    render: function() {
    return (
    &lt;div style={this.styles.container}&gt;
        &lt;ul style={this.styles.ul}&gt;
            &lt;li style={this.styles.li} &gt;&lt;i style={this.styles.i} className="fa-lg fa fa-pencil"/&gt;Rename Document&lt;/li&gt;
            &lt;li style={this.styles.li} &gt;&lt;i style={this.styles.i} className="fa-lg fa fa-clipboard"/&gt;Copy Content&lt;/li&gt;
            &lt;li style={this.styles.li} &gt;&lt;i style={this.styles.i} className="fa-lg fa fa-eraser"/&gt;Clear&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    );
    }
});</code></pre>
        <p>We've hooked this component up to Fluxxor and it is listenting to the <code>DocumentStore</code> for it's state. We've also applied some styling to the elements we want to render in the same manner as the previous lesson.</p>
        <p>Now let's add the actions one by one starting with clearing the content. For this action we will assign a <code>handleClear</code> callback to the <code>onClick</code> event handler, fire a Flux action from that callback, and propogate it through the dispatcher to the store to update the component state.</p>
        <pre><code>// Action constants
            var constants = {
    CLEAR_INPUT: 'CLEAR_INPUT',
    ...
};

var actions = {
    ...

    clearInput: function() {
    this.dispatch(constants.CLEAR_INPUT);
    },

    ...
};

// Stores
var DocumentStore = Fluxxor.createStore({
    mixins: [
        FluxMixin
    ],

    initialize: function() {
        this.document = {
            'text': '',
        };

        this.bindActions(
            ...
            constants.CLEAR_INPUT, this.onClearInput
        );
    },
    ...
    onClearInput: function() {
        this.document.text = '';

        this.emit('change');
    },

    getState: function() {
        return {
            document: this.document
        };
    }
});
...
var Sidebar = React.createClass({
    displayName : 'Sidebar',

    mixins: [
        FluxMixin,
        Fluxxor.StoreWatchMixin('DocumentStore')
    ],

    handleClear: function() {
        var flux = this.getFlux();
        flux.actions.clearInput();
    },

    styles: {
        container: {
            WebkitBoxSizing: 'border-box',
            MozBoxSizing: 'border-box',
            boxSizing: 'border-box',
            float: 'left',
            width: '12%',
            backgroundColor: '#424242',
            color: '#e9e9e9'
        },
        ul: {
            padding: '0px 5px',
            marginTop: '0px',
            marginBottom: '0px'
        },
        li: {
            paddingTop: '2px',
            paddingBottom: '2px',
            cursor: 'pointer'
        },
        i: {
            width: '25px'
        }
    },

    getStateFromFlux: function() {
        var flux = this.getFlux();
        return flux.store('DocumentStore').getState();
    },

    render: function() {
        return (
            &lt;div style={this.styles.container}&gt;
            &lt;ul style={this.styles.ul}&gt;
            &lt;li style={this.styles.li} &gt;&lt;i style={this.styles.i} className="fa-lg fa fa-pencil"/&gt;Rename Document&lt;/li&gt;
            &lt;li style={this.styles.li} &gt;&lt;i style={this.styles.i} className="fa-lg fa fa-clipboard"/&gt;Copy Content&lt;/li&gt;
            &lt;li style={this.styles.li}  onClick={this.handleClear}&gt;&lt;i style={this.styles.i} className="fa-lg fa fa-eraser"/&gt;Clear&lt;/li&gt;
            &lt;/ul&gt;
            &lt;/div&gt;
        );
    }
});</code></pre>
        <p>Next we will allow for copying the document content using the ZeroClipboard plugin.</p>
        <h2>Further Reading</h2>
        <ul>
            <li><a href="https://github.com/zeroclipboard/zeroclipboard" target="_blank">ZeroClipboard</a></li>
        </ul>
    </div>
    <div id="footerNav">
      <a href="../lesson_2/lesson.html">Previous Lesson</a> | <a href="../lesson_4/lesson.html">Next Lesson</a>
    </div>
  </body>
</html>
